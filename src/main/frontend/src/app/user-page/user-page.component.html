<app-header></app-header>
<div class="container">

  <div class="card mt-2 bg-light">
    <div class="card-body">

      <h1 id="personal" class="display-4 text-center">{{pageTitle}}</h1>
      <div *ngIf="user.email!=''; else loadingBlock">
        <div class="row justify-content-center">
          <div class="col-md-9 col-sm-12">
            <div class="row justify-content-between">
              <div class="col-md-5 col-sm-12">
                <form class="form-horizontal" id="infoForm">
                  <div class="form-group row">
                    <label for="firstName" class="col-form-label">First name</label>
                    <input type="text" [(ngModel)]="user.firstName" class="form-control" id="firstName" name="firstName"
                           required>
                  </div>

                  <div class="form-group row">
                    <label for="lastName" class="col-form-label">Last name</label>
                    <input type="text" [(ngModel)]="user.lastName" class="form-control" id="lastName" name="lastName"
                           required>
                  </div>

                  <div class="form-group row">
                    <label for="birthday" class="col-form-label">Birthday</label>
                    <input type="text" [(ngModel)]="user.birthday" class="form-control" id="birthday" name="birthday"
                           required>
                  </div>

                  <div class="form-group row justify-content-between">
                    <div class="col-sm-9 col-12">
                      <div class="collapse" id="collapseMessageInfo">
                        <div id="error2" class="alert alert-primary" role="alert">
                          {{errorMsgInfo}}
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-3 col-12">
                      <button type="submit" class="btn btn-primary" (click)="onPersonalInfoSubmit($event)">Save changes
                      </button>
                    </div>
                  </div>
                </form>
              </div>

              <div class="col-md-5 col-sm-12">
                <form class="form-horizontal" id="changePasswordForm">
                  <div id="pwd" class="form-group row">
                    <label for="inputPassword" class="col-form-label">Password</label>
                    <input type="password" class="form-control" [(ngModel)]="oldPassword" id="inputPassword"
                           name="inputPassword"
                           placeholder="Password" required>
                  </div>

                  <div id="newpwd" class="form-group row">
                    <label for="inputNewPassword" class="col-form-label">New password</label>
                    <input type="password" class="form-control" [(ngModel)]="newPassword" id="inputNewPassword"
                           name="inputNewPassword" placeholder="New password" required>
                  </div>


                  <div id="conpwd" class="form-group row">
                    <label for="confirmNewPassword" class="col-form-label">Confirm new password</label>
                    <input type="password" class="form-control" [(ngModel)]="confirmNewPassword" id="confirmNewPassword"
                           name="confirmNewPassword" placeholder="Confirm new password" required>
                  </div>

                  <div id="chanpwd" class="form-group row justify-content-between">
                    <div class="col-sm-9 col-12">
                      <div class="collapse" id="collapseMessagePassword">
                        <div id="error" class="alert alert-primary" role="alert">
                          {{errorMsgPassword}}
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-3 col-12">
                      <button type="submit" class="btn btn-primary" (click)="onChangePasswordSubmit($event)">Change
                        password
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
            <!--
                  <form class="form-horizontal">
                    <div class="form-group row">
                      <label for="exampleFormControlFile1" class="col-sm-2 col-form-label">Photo</label>
                      <div class="col-sm-2">
                        <input type="file" class="form-control-file" id="exampleFormControlFile1">
                      </div>
                    </div>
                  </form>
            -->
            <div class="row">
              <p class="lead"><strong>Email:</strong> {{user.email}}</p>
            </div>
            <div class="row">
              <p class="lead"><strong>Registration date:</strong> {{user.registrationDate}}</p>
            </div>
            <div class="row">
              <p class="lead"><strong>Balance:</strong> {{user.balance}}</p>
            </div>
            <div class="row" *ngIf="isBusiness">
              &nbsp;
              <p><strong>get more: </strong></p>
              &nbsp;
              <input type="number" [(ngModel)]="out_sum">
              <button type="button" (click)="donateSubmit()" class="btn btn-dark">Buy</button>
            </div>
            <div class="row">
              <p *ngIf="isBusiness" class="lead"><strong>Business balance:</strong> {{user.businessBalance}}</p>
            </div>
            <div class="row">
              <a *ngIf="isAdmin" class="btn btn-info" routerLink="/admin">Admin panel</a>
            </div>


          </div>
        </div>
      </div>
      <ng-template #loadingBlock>
        <h5>Loading personal info...</h5>
      </ng-template>
    </div>
  </div>
</div>
